---
import ExperienceItem from "./ExperienceItem.astro";
import experienceData from "../data/ExperienceData.json"; // âœ… JSON externo
import { useTranslations } from "../i18n/util";
import { languageList } from "../i18n/ui";

const currentLang = Astro.currentLocale || "es";
const t = useTranslations(currentLang as keyof typeof languageList);

// Mapeamos el JSON aplicando t() a las claves
const EXPERIENCIE = experienceData.map((item) => ({
  date: t(item.date),
  title: t(item.title),
  description: t(item.description),
  link: item.link,
}));
---

<ol class="relative justify-center border-gray-200 border-s dark:border-gray-700">
  {
    EXPERIENCIE.map((experiencie) => (
      <ExperienceItem {...experiencie} />
    ))
  }
</ol>
